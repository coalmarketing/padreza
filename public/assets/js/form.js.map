{
  "version": 3,
  "sources": ["../../../src/assets/js/form.js"],
  "sourcesContent": ["const form1 = document.getElementById(\"form-1\");\nconst form2 = document.getElementById(\"form-2\");\n\nif (form1) {\n    form1.addEventListener(\"submit\", (e) => {\n        e.preventDefault();\n\n        if (!form1.checkValidity()) {\n            form1.reportValidity();\n            return;\n        }\n\n        const data = Object.fromEntries(new FormData(form1));\n        localStorage.setItem(\"form1\", JSON.stringify(data));\n        window.location.href = \"/poptavka/\";\n    });\n}\nelse if (form2) {\n    const data1 = JSON.parse(localStorage.getItem(\"form1\"));\n    if (!data1) window.location.href = \"/#objednavka\";\n\n    // napln\u011Bn\u00ED hidden input\u016F z kroku 1\n    Object.entries(data1).forEach(([key, value]) => {\n        const input = form2.querySelector(`input[name=\"${key}\"]`);\n        if (input) input.value = value;\n    });\n\n    const dopravaRadios = form2.querySelectorAll('input[name=\"doprava\"]');\n    const adresa = form2.querySelector('input[name=\"adresa\"]');\n    const submitBtn = form2.querySelector('button[type=\"submit\"], input[type=\"submit\"]');\n\n    function updateAdresa() {\n        const selected = form2.querySelector('input[name=\"doprava\"]:checked');\n        if (!selected) return;\n\n        if (selected.value === \"vlastn\u00ED\") {\n            adresa.style.display = \"none\";\n            adresa.required = false;\n            adresa.value = \"\";\n        } else {\n            adresa.style.display = \"\";\n            adresa.required = true;\n        }\n    }\n\n    dopravaRadios.forEach(radio => {\n        radio.addEventListener(\"change\", updateAdresa);\n    });\n    updateAdresa();\n\n    form2.addEventListener(\"submit\", async (e) => {\n        if (form2.dataset.sending === \"done\") return;\n\n        e.preventDefault();\n        if (form2.dataset.sending === \"true\") return;\n\n        form2.dataset.sending = \"true\";\n\n        // Deaktivace formul\u00E1\u0159e a zm\u011Bna textu tla\u010D\u00EDtka\n        form2.querySelectorAll(\"input, select, textarea, button\").forEach(el => el.disabled = true);\n        if (submitBtn) {\n            submitBtn.dataset.originalText = submitBtn.textContent || submitBtn.value;\n            if (submitBtn.tagName === \"BUTTON\") {\n                submitBtn.textContent = \"Odes\u00EDl\u00E1m \u2026\";\n            } else {\n                submitBtn.value = \"Odes\u00EDl\u00E1m \u2026\";\n            }\n        }\n\n        const formData = new FormData(form2);\n        const data = Object.fromEntries(formData.entries());\n\n        try {\n            const res = await fetch(\"/.netlify/functions/submit\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(data),\n            });\n\n            if (!res.ok) {\n                const text = await res.text();\n                throw new Error(`Chyba serveru: ${res.status} ${text}`);\n            }\n\n            // Po \u00FAsp\u011Bchu p\u0159esm\u011Bruj\n            localStorage.removeItem(\"form1\");\n            window.location.href = \"/poptavka-odeslana/\";\n            form2.dataset.sending = \"done\";\n\n        } catch (err) {\n            console.error(\"Chyba odes\u00EDl\u00E1n\u00ED popt\u00E1vky\", err);\n            form2.dataset.sending = \"false\";\n\n            // Obnoven\u00ED formul\u00E1\u0159e a tla\u010D\u00EDtka\n            form2.querySelectorAll(\"input, select, textarea, button\").forEach(el => el.disabled = false);\n            if (submitBtn && submitBtn.dataset.originalText) {\n                if (submitBtn.tagName === \"BUTTON\") {\n                    submitBtn.textContent = submitBtn.dataset.originalText;\n                } else {\n                    submitBtn.value = submitBtn.dataset.originalText;\n                }\n            }\n\n            alert(\"Odesl\u00E1n\u00ED se nezda\u0159ilo, zkuste to pros\u00EDm znovu.\");\n        }\n    });\n}\n"],
  "mappings": "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",
  "names": ["updateAdresa"]
}
